<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DevOps CRUD Demo</title>
    <style>
        body { font-family: Arial; margin: 40px; }
        input, button { padding: 5px; margin: 5px; }
        table { border-collapse: collapse; margin-top: 20px; width: 80%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
    </style>
</head>
<body>
    <h1>User Management</h1>

    <h3>Create User</h3>
    <input id="name" placeholder="Name">
    <input id="email" placeholder="Email">
    <button onclick="createUser()">Add User</button>

    <h3>Users</h3>
    <table>
        <thead>
            <tr><th>ID</th><th>Name</th><th>Email</th><th>Actions</th></tr>
        </thead>
        <tbody id="users-table"></tbody>
    </table>

    <script>
        const api = "/api/users";

        function fetchUsers() {
            fetch(api)
                .then(res => res.json())
                .then(data => {
                    const tbody = document.getElementById("users-table");
                    tbody.innerHTML = "";
                    data.forEach(user => {
                        const tr = document.createElement("tr");
                        tr.innerHTML = `
                            <td>${user.id}</td>
                            <td><input value="${user.name}" id="name-${user.id}"></td>
                            <td><input value="${user.email}" id="email-${user.id}"></td>
                            <td>
                                <button onclick="updateUser(${user.id})">Update</button>
                                <button onclick="deleteUser(${user.id})">Delete</button>
                            </td>
                        `;
                        tbody.appendChild(tr);
                    });
                });
        }

        function createUser() {
            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            fetch(api, {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({name, email})
            }).then(() => fetchUsers());
        }

        function updateUser(id) {
            const name = document.getElementById(`name-${id}`).value;
            const email = document.getElementById(`email-${id}`).value;
            fetch(`${api}/${id}`, {
                method: "PUT",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({name, email})
            }).then(() => fetchUsers());
        }

        function deleteUser(id) {
            fetch(`${api}/${id}`, { method: "DELETE" })
                .then(() => fetchUsers());
        }

        fetchUsers(); // Initial load
    </script>
</body>
</html>